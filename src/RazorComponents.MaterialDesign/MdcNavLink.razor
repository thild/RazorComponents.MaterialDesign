@using Microsoft.AspNetCore.Components.Routing

<div @onclick="@HandleClick">
    <NavLink href=@Href class="@(ListItem ? "mdc-list-item": "mdc-button")" Match=@Match ActiveClass="@(ListItem ? "mdc-list-item--activated": "")">
        @if(!string.IsNullOrEmpty(Icon)) {
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">@Icon</i>
        }
        <span class="@(ListItem ? "mdc-list-item__text": "")">@Text</span>
    </NavLink>
</div>

@functions {
    [CascadingParameter] MdcDrawer Drawer { get; set; }
    [Parameter] NavLinkMatch Match { get; set; } = NavLinkMatch.Prefix;
    [Parameter] string Icon { get; set; }
    [Parameter] string Text { get; set; }
    [Parameter] string Href { get; set; }
    [Parameter] bool ListItem { get; set; } = false;

    void HandleClick()
    {
        // If we're nested inside a drawer, auto-close it when navigating
        Drawer?.NotifyNavigation();
    }
}
